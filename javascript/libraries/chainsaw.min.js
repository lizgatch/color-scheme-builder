var Chainsaw=new (function(){var p={autostart:true,path:"javascript/components"};var d=this;var w={};var y=[];var m=[];var g=[];var c=[];var v=[];var x=[];var u=[];var b=[];var l=[];function t(){jQuery(document).ajaxError(j);o()}function o(){var B=q();if(B.length){n(B)}}function n(H){var E=h(H);if(E.length){for(var D=0;D<E.length;D++){var B=true;var G=true;for(var C=0;C<m.length;C++){if(E[D]===m[C]){B=false;G=false;break}}for(var C=0;C<g.length;C++){if(E[D]===g[C]){B=false;G=true;break}}if(B){var F=true;g.push(E[D]);for(var C=0;C<c.length;C++){if(E[D]===c[C].script){F=false;break}}if(F){c.push({script:E[D],instances:[]})}(function(J,I){jQuery.ajax({dataType:"script",url:J[I],success:function(L,K){f(J,H,I)}})})(E,D)}if(G){for(C=0;C<c.length;C++){if(c[C].script===E[D]){c[C].instances.push(D);break}}}if(!B&&!G){e(H[D])}}}}function A(B,C){w[C]=B}function f(G,F,B){var C=G[B];m.push(C);for(var E=0;E<g.length;E++){if(g[E]===C){g.splice(E,1);break}}for(var E=0;E<c.length;E++){if(c[E].script===C){for(var D=0;D<c[E].instances.length;D++){e(F[c[E].instances[D]])}c.splice(E,1);break}}}function e(C){var D=C.attr("data-component");var E=C.data("component-options");var B=new w[D](C,E);var F=y.length;y.push(B);if(B.getRequiredScripts&&B.getRequiredScripts().length){z(B.getRequiredScripts(),F)}else{if(B.ready){B.ready()}k(F)}}function z(D,G){for(i=0;i<D.length;i++){var B=true;var F=true;for(C=0;C<v.length;C++){if(D[i]===v[C]){B=false;F=false;break}}for(C=0;C<x.length;C++){if(D[i]===x[C]){B=false;F=true;break}}if(B){var E=true;x.push(D[i]);for(var C=0;C<u.length;C++){if(D[i]===u[C].script){E=false;break}}if(E){u.push({script:D[i],instances:[]})}(function(I,H){jQuery.ajax({dataType:"script",url:I[H],success:function(K,J){r(I[H])}})})(D,i)}if(F){for(C=0;C<u.length;C++){if(u[C].script===D[i]){u[C].instances.push(G);break}}}if(!F&&!B){y[G].ready()}}}function r(D){v.push(D);for(var C=0;C<x.length;C++){if(x[C]===D){x.splice(C,1);break}}for(var C=0;C<u.length;C++){if(u[C].script===D){for(var B=0;B<u[C].instances.length;B++){a(u[C].instances[B])}u.splice(C,1);break}}}function a(B){var F=0;var E=y[B].getRequiredScripts();for(var D=0;D<E.length;D++){for(var C=0;C<v.length;C++){if(E[D]===v[C]){F++;break}}}if(F===E.length){if(y[B].ready){y[B].ready()}k(B)}}function k(F){if(y[F].getMessageTypes&&y[F].messageReceive){var C=y[F].getMessageTypes();if(C.length){for(var E=0;E<C.length;E++){var B=true;for(var D=0;D<b.length;D++){if(C[E]===b[D]){B=false;break}}if(B){b.push(C[E]);l.push({type:C[E],instances:[]})}for(var D=0;D<l.length;D++){if(C[E]===l[D].type){l[D].instances.push(F)}}}}}}function s(B,D){for(var E=0;E<l.length;E++){if(l[E].type===B){for(var C=0;C<l[E].instances.length;C++){if(y[l[E].instances[C]].messageReceive){y[l[E].instances[C]].messageReceive(B,D)}}break}}}function q(){var B=[];jQuery("body *[data-component]").each(function(){if(!jQuery(this).attr("data-component-index")&&!parseInt(jQuery(this).attr("data-component-index")!==0)&&jQuery(this).attr("data-component")){jQuery(this).attr({"data-component-index":y.length});B.push(jQuery(this))}});return B}function h(G){var D=[];for(var C=0;C<G.length;C++){if(G[C].attr("data-component")){var F=".js";var B=G[C].attr("data-component").toLowerCase()+F;var E=p.path+"/"+B;D.push(E)}}return D}function j(E,C,D,B){if(console){console.log("there is an error in an ajax ressource i tried to load:",E,C,D,B)}}d.scan=o;d.componentAdd=A;d.messageSend=s;if(p.autostart){t()}else{d.init=t}})();